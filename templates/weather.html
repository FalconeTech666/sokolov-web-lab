{% extends "base.html" %}

{% block title %}–ü–æ–≥–æ–¥–∞ ‚Äî Sokolov Web Lab{% endblock %}

{% block content %}
<div class="content-container">
    <div class="weather-card">
        
        <form action="{{ url_for('weather') }}" method="post" class="weather-search-form">
            <input type="text" name="city" placeholder="–í–≤–µ–¥–∏—Ç–µ –≥–æ—Ä–æ–¥..." required 
                   value="{{ city_display if city_display and city_display != 'Minsk' else '' }}">
            <button type="submit" class="btn-icon">üîç</button>
        </form>

        {% if error_message %}
            <div class="weather-error">
                <p>üòï {{ error_message }}</p>
                <small>–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –¥—Ä—É–≥–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ</small>
            </div>
        {% elif temp is not none %}
            <header class="weather-header">
                <h1>{{ city_display|capitalize }}</h1>
                <p class="weather-desc">{{ description|capitalize }}</p>
                <div class="weather-main">
                    <img src="{{ icon_url }}" alt="icon" class="weather-icon">
                    <span class="weather-temp">{{ temp|round|int }}¬∞</span>
                </div>
                <p class="weather-details">–û—â—É—â–∞–µ—Ç—Å—è –∫–∞–∫ {{ feels_like|round|int }}¬∞</p>
            </header>

            <div class="weather-stats">
                <div class="stat-item">
                    <span class="stat-label">–í–ª–∞–∂–Ω–æ—Å—Ç—å</span>
                    <span class="stat-value">{{ humidity }}%</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">–í–µ—Ç–µ—Ä</span>
                    <span class="stat-value">{{ wind_speed }} –º/—Å</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">–î–∞–≤–ª–µ–Ω–∏–µ</span>
                    <span class="stat-value">{{ pressure }} –≥–ü–∞</span>
                </div>
            </div>

            {% if forecast_days %}
            <div class="forecast-section">
                <h3>–ü—Ä–æ–≥–Ω–æ–∑ –Ω–∞ 4 –¥–Ω—è</h3>
                <div class="forecast-list">
                    {% for day in forecast_days %}
                    <div class="forecast-item">
                        <span class="f-date">{{ day.date }}</span>
                        <img src="{{ day.icon_url }}" alt="icon" class="f-icon">
                        <span class="f-temp">{{ day.temp|round|int }}¬∞</span>
                    </div>
                    {% endfor %}
                </div>
            </div>
            {% endif %}
            
            <div class="weather-footer">
                <small>–û–±–Ω–æ–≤–ª–µ–Ω–æ: {{ updated_at }}</small>
            </div>
        
        {% else %}
            <p style="margin-top:20px;">–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –≥–æ—Ä–æ–¥–∞, —á—Ç–æ–±—ã —É–∑–Ω–∞—Ç—å –ø–æ–≥–æ–¥—É.</p>
        {% endif %}
    </div>
</div>
{% endblock %}